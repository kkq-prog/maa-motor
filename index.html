<!DOCTYPE html>

<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>MAA MOTOR - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø±Ø¶</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
:root {
  --bg: #0a0a0f;
  --card: #12121a;
  --card2: #1a1a28;
  --border: #2a2a3d;
  --gold: #d4a853;
  --gold-light: #e8c97a;
  --gold-dark: #b8912f;
  --accent: #4a9eff;
  --green: #34d399;
  --red: #f87171;
  --orange: #fb923c;
  --text: #e8e8f0;
  --text2: #9898b0;
  --text3: #5a5a72;
}
body {
  font-family: 'Tajawal', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* Background Pattern */
body::before {
content: â€˜â€™;
position: fixed;
top: 0; left: 0; right: 0; bottom: 0;
background:
radial-gradient(ellipse at 20% 0%, rgba(212,168,83,0.08) 0%, transparent 60%),
radial-gradient(ellipse at 80% 100%, rgba(74,158,255,0.05) 0%, transparent 60%);
pointer-events: none;
z-index: 0;
}

/* Header */
.header {
background: linear-gradient(135deg, #0f0f18 0%, #1a1525 50%, #0f0f18 100%);
border-bottom: 1px solid var(â€“border);
padding: 15px 20px;
position: sticky;
top: 0;
z-index: 100;
backdrop-filter: blur(20px);
}
.header-content {
max-width: 1400px;
margin: 0 auto;
display: flex;
justify-content: space-between;
align-items: center;
}
.logo {
display: flex;
align-items: center;
gap: 12px;
}
.logo-icon {
width: 45px;
height: 45px;
background: linear-gradient(135deg, var(â€“gold), var(â€“gold-dark));
border-radius: 12px;
display: flex;
align-items: center;
justify-content: center;
font-size: 20px;
font-weight: 900;
color: #0a0a0f;
letter-spacing: -1px;
box-shadow: 0 4px 15px rgba(212,168,83,0.3);
}
.logo-text h1 {
font-size: 20px;
font-weight: 800;
background: linear-gradient(135deg, var(â€“gold-light), var(â€“gold));
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
letter-spacing: 1px;
}
.logo-text span {
font-size: 11px;
color: var(â€“text3);
letter-spacing: 2px;
}
.header-time {
text-align: left;
font-size: 13px;
color: var(â€“text2);
}
.header-time .date { font-weight: 700; color: var(â€“gold); font-size: 14px; }

/* Navigation */
.nav {
background: var(â€“card);
border-bottom: 1px solid var(â€“border);
padding: 0 20px;
overflow-x: auto;
-webkit-overflow-scrolling: touch;
scrollbar-width: none;
position: sticky;
top: 75px;
z-index: 99;
}
.nav::-webkit-scrollbar { display: none; }
.nav-inner {
max-width: 1400px;
margin: 0 auto;
display: flex;
gap: 0;
}
.nav-btn {
padding: 14px 20px;
background: none;
border: none;
color: var(â€“text2);
font-family: â€˜Tajawalâ€™, sans-serif;
font-size: 14px;
font-weight: 500;
cursor: pointer;
white-space: nowrap;
border-bottom: 3px solid transparent;
transition: all 0.3s;
}
.nav-btn:hover { color: var(â€“text); }
.nav-btn.active {
color: var(â€“gold);
border-bottom-color: var(â€“gold);
font-weight: 700;
}

/* Main */
.main {
max-width: 1400px;
margin: 0 auto;
padding: 20px;
position: relative;
z-index: 1;
}

/* Stats Row */
.stats {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
gap: 12px;
margin-bottom: 24px;
}
.stat-card {
background: var(â€“card);
border: 1px solid var(â€“border);
border-radius: 16px;
padding: 18px;
position: relative;
overflow: hidden;
transition: transform 0.3s, box-shadow 0.3s;
}
.stat-card:hover {
transform: translateY(-2px);
box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}
.stat-card::before {
content: â€˜â€™;
position: absolute;
top: 0; right: 0;
width: 60px; height: 60px;
border-radius: 0 16px 0 40px;
opacity: 0.1;
}
.stat-card.gold::before { background: var(â€“gold); }
.stat-card.blue::before { background: var(â€“accent); }
.stat-card.green::before { background: var(â€“green); }
.stat-card.red::before { background: var(â€“red); }
.stat-icon {
font-size: 24px;
margin-bottom: 10px;
}
.stat-value {
font-size: 26px;
font-weight: 800;
}
.stat-card.gold .stat-value { color: var(â€“gold); }
.stat-card.blue .stat-value { color: var(â€“accent); }
.stat-card.green .stat-value { color: var(â€“green); }
.stat-card.red .stat-value { color: var(â€“red); }
.stat-label {
font-size: 12px;
color: var(â€“text2);
margin-top: 4px;
}

/* Section */
.section {
display: none;
}
.section.active {
display: block;
animation: fadeIn 0.4s ease;
}
@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

/* Cards */
.card {
background: var(â€“card);
border: 1px solid var(â€“border);
border-radius: 16px;
padding: 20px;
margin-bottom: 16px;
}
.card-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 16px;
}
.card-title {
font-size: 18px;
font-weight: 700;
color: var(â€“gold);
}

/* Buttons */
.btn {
padding: 10px 20px;
border: none;
border-radius: 10px;
font-family: â€˜Tajawalâ€™, sans-serif;
font-size: 14px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
display: inline-flex;
align-items: center;
gap: 6px;
}
.btn-gold {
background: linear-gradient(135deg, var(â€“gold), var(â€“gold-dark));
color: #0a0a0f;
}
.btn-gold:hover { box-shadow: 0 4px 15px rgba(212,168,83,0.4); transform: translateY(-1px); }
.btn-outline {
background: transparent;
border: 1px solid var(â€“border);
color: var(â€“text2);
}
.btn-outline:hover { border-color: var(â€“gold); color: var(â€“gold); }
.btn-red { background: rgba(248,113,113,0.15); color: var(â€“red); }
.btn-green { background: rgba(52,211,153,0.15); color: var(â€“green); }
.btn-sm { padding: 6px 14px; font-size: 12px; }

/* Table */
.table-wrap {
overflow-x: auto;
-webkit-overflow-scrolling: touch;
border-radius: 12px;
border: 1px solid var(â€“border);
}
table {
width: 100%;
border-collapse: collapse;
min-width: 700px;
}
th {
background: var(â€“card2);
padding: 12px 16px;
text-align: right;
font-size: 12px;
font-weight: 600;
color: var(â€“text2);
text-transform: uppercase;
letter-spacing: 1px;
white-space: nowrap;
}
td {
padding: 14px 16px;
border-top: 1px solid var(â€“border);
font-size: 14px;
white-space: nowrap;
}
tr:hover td { background: rgba(212,168,83,0.03); }
.badge {
padding: 4px 12px;
border-radius: 20px;
font-size: 12px;
font-weight: 600;
}
.badge-green { background: rgba(52,211,153,0.15); color: var(â€“green); }
.badge-red { background: rgba(248,113,113,0.15); color: var(â€“red); }
.badge-orange { background: rgba(251,146,60,0.15); color: var(â€“orange); }
.badge-blue { background: rgba(74,158,255,0.15); color: var(â€“accent); }
.badge-gold { background: rgba(212,168,83,0.15); color: var(â€“gold); }

/* Forms */
.form-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 14px;
}
.form-group { display: flex; flex-direction: column; gap: 6px; }
.form-group label {
font-size: 12px;
font-weight: 600;
color: var(â€“text2);
}
.form-group input, .form-group select, .form-group textarea {
padding: 10px 14px;
background: var(â€“card2);
border: 1px solid var(â€“border);
border-radius: 10px;
color: var(â€“text);
font-family: â€˜Tajawalâ€™, sans-serif;
font-size: 14px;
outline: none;
transition: border-color 0.3s;
}
.form-group input:focus, .form-group select:focus {
border-color: var(â€“gold);
}

/* Modal */
.modal-overlay {
display: none;
position: fixed;
top: 0; left: 0; right: 0; bottom: 0;
background: rgba(0,0,0,0.7);
backdrop-filter: blur(5px);
z-index: 200;
justify-content: center;
align-items: center;
padding: 20px;
}
.modal-overlay.show { display: flex; }
.modal {
background: var(â€“card);
border: 1px solid var(â€“border);
border-radius: 20px;
padding: 24px;
width: 100%;
max-width: 600px;
max-height: 85vh;
overflow-y: auto;
animation: modalIn 0.3s ease;
}
@keyframes modalIn {
from { opacity: 0; transform: scale(0.95) translateY(20px); }
to { opacity: 1; transform: scale(1) translateY(0); }
}
.modal-title {
font-size: 20px;
font-weight: 700;
color: var(â€“gold);
margin-bottom: 20px;
display: flex;
justify-content: space-between;
align-items: center;
}
.modal-close {
background: none;
border: none;
color: var(â€“text3);
font-size: 24px;
cursor: pointer;
}

/* Plate Styles */
.plate {
display: inline-flex;
align-items: center;
gap: 8px;
background: #fff;
color: #000;
padding: 4px 12px;
border-radius: 6px;
font-weight: 700;
font-size: 13px;
direction: ltr;
}
.plate-emirate {
font-size: 10px;
color: #666;
}

/* Search */
.search-box {
position: relative;
margin-bottom: 16px;
}
.search-box input {
width: 100%;
padding: 12px 16px 12px 40px;
background: var(â€“card2);
border: 1px solid var(â€“border);
border-radius: 12px;
color: var(â€“text);
font-family: â€˜Tajawalâ€™, sans-serif;
font-size: 14px;
outline: none;
}
.search-box input:focus { border-color: var(â€“gold); }
.search-icon {
position: absolute;
left: 14px;
top: 50%;
transform: translateY(-50%);
color: var(â€“text3);
}

/* Financial cards */
.finance-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
gap: 16px;
margin-bottom: 20px;
}
.finance-card {
background: var(â€“card);
border: 1px solid var(â€“border);
border-radius: 16px;
padding: 20px;
}
.finance-card h3 {
font-size: 14px;
color: var(â€“text2);
margin-bottom: 10px;
}
.finance-card .amount {
font-size: 28px;
font-weight: 800;
}
.finance-card .amount.positive { color: var(â€“green); }
.finance-card .amount.negative { color: var(â€“red); }
.finance-card .amount.gold { color: var(â€“gold); }

/* Empty state */
.empty-state {
text-align: center;
padding: 60px 20px;
color: var(â€“text3);
}
.empty-state .icon { font-size: 48px; margin-bottom: 16px; }
.empty-state p { font-size: 16px; }

/* Responsive */
@media (max-width: 768px) {
.stats { grid-template-columns: repeat(2, 1fr); }
.stat-value { font-size: 22px; }
.form-grid { grid-template-columns: 1fr; }
.finance-grid { grid-template-columns: 1fr; }
.header-content { flex-direction: column; gap: 8px; }
}

/* Print styles */
@media print {
.nav, .header, .btn { display: none !important; }
.section { display: block !important; }
body { background: #fff; color: #000; }
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(â€“bg); }
::-webkit-scrollbar-thumb { background: var(â€“border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(â€“text3); }

/* Action buttons in table */
.action-btns { display: flex; gap: 6px; }
</style>

</head>
<body>

<!-- Header -->

<div class="header">
  <div class="header-content">
    <div class="logo">
      <div class="logo-icon">M</div>
      <div class="logo-text">
        <h1>MAA MOTOR</h1>
        <span>DEALERSHIP MANAGEMENT</span>
      </div>
    </div>
    <div class="header-time">
      <div class="date" id="currentDate"></div>
      <div id="currentTime"></div>
    </div>
  </div>
</div>

<!-- Navigation -->

<div class="nav">
  <div class="nav-inner">
    <button class="nav-btn active" onclick="showSection('dashboard')">ğŸ“Š Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button class="nav-btn" onclick="showSection('inventory')">ğŸš— Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
    <button class="nav-btn" onclick="showSection('sales')">ğŸ’° Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
    <button class="nav-btn" onclick="showSection('customers')">ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
    <button class="nav-btn" onclick="showSection('employees')">ğŸ‘” Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</button>
    <button class="nav-btn" onclick="showSection('finance')">ğŸ“ˆ Ø§Ù„Ù…Ø§Ù„ÙŠØ©</button>
    <button class="nav-btn" onclick="showSection('expenses')">ğŸ§¾ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</button>
  </div>
</div>

<!-- Main Content -->

<div class="main">

  <!-- Dashboard -->

  <div class="section active" id="sec-dashboard">
    <div class="stats">
      <div class="stat-card gold">
        <div class="stat-icon">ğŸš—</div>
        <div class="stat-value" id="totalCars">0</div>
        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</div>
      </div>
      <div class="stat-card green">
        <div class="stat-icon">âœ…</div>
        <div class="stat-value" id="totalSales">0</div>
        <div class="stat-label">Ø³ÙŠØ§Ø±Ø§Øª Ù…Ø¨Ø§Ø¹Ø©</div>
      </div>
      <div class="stat-card blue">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-value" id="totalCustomers">0</div>
        <div class="stat-label">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
      </div>
      <div class="stat-card red">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-value" id="totalRevenue">0</div>
        <div class="stat-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø¯.Ø¥)</div>
      </div>
    </div>

```
<div class="card">
  <div class="card-header">
    <div class="card-title">ğŸ“‹ Ø¢Ø®Ø± Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</div>
  </div>
  <div id="recentActivity">
    <div class="empty-state">
      <div class="icon">ğŸ“‹</div>
      <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯</p>
    </div>
  </div>
</div>
```

  </div>

  <!-- Inventory -->

  <div class="section" id="sec-inventory">
    <div class="card">
      <div class="card-header">
        <div class="card-title">ğŸš— Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</div>
        <button class="btn btn-gold" onclick="openModal('addCar')">+ Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø©</button>
      </div>
      <div class="search-box">
        <span class="search-icon">ğŸ”</span>
        <input type="text" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ø³ÙŠØ§Ø±Ø©..." oninput="filterCars(this.value)">
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Ø§Ù„Ù…Ø§Ø±ÙƒØ©</th>
              <th>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</th>
              <th>Ø§Ù„Ø³Ù†Ø©</th>
              <th>Ø§Ù„Ù„ÙˆÙ†</th>
              <th>Ø§Ù„Ù„ÙˆØ­Ø©</th>
              <th>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</th>
              <th>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
              <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
              <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="carsTable"></tbody>
        </table>
      </div>
      <div class="empty-state" id="carsEmpty">
        <div class="icon">ğŸš—</div>
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙŠØ§Ø±Ø§Øª - Ø£Ø¶Ù Ø£ÙˆÙ„ Ø³ÙŠØ§Ø±Ø©</p>
      </div>
    </div>
  </div>

  <!-- Sales -->

  <div class="section" id="sec-sales">
    <div class="card">
      <div class="card-header">
        <div class="card-title">ğŸ’° Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
        <button class="btn btn-gold" onclick="openModal('addSale')">+ Ø¨ÙŠØ¹ Ø³ÙŠØ§Ø±Ø©</button>
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Ø§Ù„Ø³ÙŠØ§Ø±Ø©</th>
              <th>Ø§Ù„Ù…Ø´ØªØ±ÙŠ</th>
              <th>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
              <th>Ø§Ù„Ø±Ø¨Ø­</th>
              <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
              <th>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>
            </tr>
          </thead>
          <tbody id="salesTable"></tbody>
        </table>
      </div>
      <div class="empty-state" id="salesEmpty">
        <div class="icon">ğŸ’°</div>
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ø¨Ø¹Ø¯</p>
      </div>
    </div>
  </div>

  <!-- Customers -->

  <div class="section" id="sec-customers">
    <div class="card">
      <div class="card-header">
        <div class="card-title">ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</div>
        <button class="btn btn-gold" onclick="openModal('addCustomer')">+ Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„</button>
      </div>
      <div class="search-box">
        <span class="search-icon">ğŸ”</span>
        <input type="text" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„..." oninput="filterCustomers(this.value)">
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Ø§Ù„Ø§Ø³Ù…</th>
              <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
              <th>Ø§Ù„Ù‡ÙˆÙŠØ©</th>
              <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
              <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
              <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="customersTable"></tbody>
        </table>
      </div>
      <div class="empty-state" id="customersEmpty">
        <div class="icon">ğŸ‘¥</div>
        <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡ - Ø£Ø¶Ù Ø£ÙˆÙ„ Ø¹Ù…ÙŠÙ„</p>
      </div>
    </div>
  </div>

  <!-- Employees -->

  <div class="section" id="sec-employees">
    <div class="card">
      <div class="card-header">
        <div class="card-title">ğŸ‘” Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø±ÙˆØ§ØªØ¨</div>
        <button class="btn btn-gold" onclick="openModal('addEmployee')">+ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù</button>
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Ø§Ù„Ø§Ø³Ù…</th>
              <th>Ø§Ù„Ù…Ù†ØµØ¨</th>
              <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
              <th>Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</th>
              <th>Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</th>
              <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
              <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="employeesTable"></tbody>
        </table>
      </div>
      <div class="empty-state" id="employeesEmpty">
        <div class="icon">ğŸ‘”</div>
        <p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¸ÙÙŠÙ† - Ø£Ø¶Ù Ø£ÙˆÙ„ Ù…ÙˆØ¸Ù</p>
      </div>
    </div>
  </div>

  <!-- Finance -->

  <div class="section" id="sec-finance">
    <div class="finance-grid">
      <div class="finance-card">
        <h3>ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
        <div class="amount gold" id="finTotalSales">0 Ø¯.Ø¥</div>
      </div>
      <div class="finance-card">
        <h3>ğŸ“ˆ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h3>
        <div class="amount positive" id="finTotalProfit">0 Ø¯.Ø¥</div>
      </div>
      <div class="finance-card">
        <h3>ğŸ§¾ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>
        <div class="amount negative" id="finTotalExpenses">0 Ø¯.Ø¥</div>
      </div>
      <div class="finance-card">
        <h3>ğŸ’µ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</h3>
        <div class="amount gold" id="finNetProfit">0 Ø¯.Ø¥</div>
      </div>
      <div class="finance-card">
        <h3>ğŸš— Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h3>
        <div class="amount gold" id="finInventoryValue">0 Ø¯.Ø¥</div>
      </div>
      <div class="finance-card">
        <h3>ğŸ‘” Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ÙˆØ§ØªØ¨</h3>
        <div class="amount negative" id="finTotalSalaries">0 Ø¯.Ø¥</div>
      </div>
    </div>
  </div>

  <!-- Expenses -->

  <div class="section" id="sec-expenses">
    <div class="card">
      <div class="card-header">
        <div class="card-title">ğŸ§¾ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</div>
        <button class="btn btn-gold" onclick="openModal('addExpense')">+ Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</button>
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Ø§Ù„ÙˆØµÙ</th>
              <th>Ø§Ù„ÙØ¦Ø©</th>
              <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
              <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
              <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="expensesTable"></tbody>
        </table>
      </div>
      <div class="empty-state" id="expensesEmpty">
        <div class="icon">ğŸ§¾</div>
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª Ø¨Ø¹Ø¯</p>
      </div>
    </div>
  </div>

</div>

<!-- Modals -->

<!-- Add Car Modal -->

<div class="modal-overlay" id="modal-addCar">
  <div class="modal">
    <div class="modal-title">
      ğŸš— Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©
      <button class="modal-close" onclick="closeModal('addCar')">âœ•</button>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Ø§Ù„Ù…Ø§Ø±ÙƒØ©</label>
        <select id="carBrand">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø±ÙƒØ©</option>
          <option>ØªÙˆÙŠÙˆØªØ§</option><option>Ù†ÙŠØ³Ø§Ù†</option><option>Ù‡ÙˆÙ†Ø¯Ø§</option>
          <option>Ù…Ø±Ø³ÙŠØ¯Ø³</option><option>Ø¨ÙŠ Ø§Ù… Ø¯Ø¨Ù„ÙŠÙˆ</option><option>Ø£ÙˆØ¯ÙŠ</option>
          <option>Ù„ÙƒØ²Ø³</option><option>Ø¨ÙˆØ±Ø´</option><option>Ø±Ù†Ø¬ Ø±ÙˆÙØ±</option>
          <option>Ø´ÙŠÙØ±ÙˆÙ„ÙŠÙ‡</option><option>ÙÙˆØ±Ø¯</option><option>Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ</option>
          <option>ÙƒÙŠØ§</option><option>Ù…Ø§Ø²ÙŠØ±Ø§ØªÙŠ</option><option>Ø¨Ù†ØªÙ„ÙŠ</option>
          <option>Ø±ÙˆÙ„Ø² Ø±ÙˆÙŠØ³</option><option>Ù„Ø§Ù…Ø¨ÙˆØ±ØºÙŠÙ†ÙŠ</option><option>ÙÙŠØ±Ø§Ø±ÙŠ</option>
          <option>Ø£Ø®Ø±Ù‰</option>
        </select>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</label>
        <input type="text" id="carModel" placeholder="Ù…Ø«Ø§Ù„: ÙƒØ§Ù…Ø±ÙŠ">
      </div>
      <div class="form-group">
        <label>Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹</label>
        <input type="number" id="carYear" placeholder="2024">
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ù„ÙˆÙ†</label>
        <select id="carColor">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†</option>
          <option>Ø£Ø¨ÙŠØ¶</option><option>Ø£Ø³ÙˆØ¯</option><option>ÙØ¶ÙŠ</option>
          <option>Ø±Ù…Ø§Ø¯ÙŠ</option><option>Ø£Ø­Ù…Ø±</option><option>Ø£Ø²Ø±Ù‚</option>
          <option>Ø£Ø®Ø¶Ø±</option><option>Ø¨ÙŠØ¬</option><option>Ø°Ù‡Ø¨ÙŠ</option>
          <option>Ø¨Ù†ÙŠ</option><option>Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ</option>
        </select>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ø¥Ù…Ø§Ø±Ø©</label>
        <select id="carEmirate">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¥Ù…Ø§Ø±Ø©</option>
          <option>Ø£Ø¨ÙˆØ¸Ø¨ÙŠ</option><option>Ø¯Ø¨ÙŠ</option><option>Ø§Ù„Ø´Ø§Ø±Ù‚Ø©</option>
          <option>Ø¹Ø¬Ù…Ø§Ù†</option><option>Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†</option><option>Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©</option>
          <option>Ø§Ù„ÙØ¬ÙŠØ±Ø©</option>
        </select>
      </div>
      <div class="form-group">
        <label>Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©</label>
        <input type="text" id="carPlate" placeholder="Ù…Ø«Ø§Ù„: A 12345">
      </div>
      <div class="form-group">
        <label>Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ (Ø¯.Ø¥)</label>
        <input type="number" id="carBuyPrice" placeholder="0">
      </div>
      <div class="form-group">
        <label>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (Ø¯.Ø¥)</label>
        <input type="number" id="carSellPrice" placeholder="0">
      </div>
      <div class="form-group" style="grid-column: 1/-1">
        <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
        <textarea id="carNotes" rows="2" style="resize:none" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©..."></textarea>
      </div>
    </div>
    <div style="margin-top:20px;display:flex;gap:10px;justify-content:flex-start">
      <button class="btn btn-gold" onclick="addCar()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</button>
      <button class="btn btn-outline" onclick="closeModal('addCar')">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<!-- Add Sale Modal -->

<div class="modal-overlay" id="modal-addSale">
  <div class="modal">
    <div class="modal-title">
      ğŸ’° ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ¹
      <button class="modal-close" onclick="closeModal('addSale')">âœ•</button>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Ø§Ù„Ø³ÙŠØ§Ø±Ø©</label>
        <select id="saleCar"></select>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ù…Ø´ØªØ±ÙŠ</label>
        <select id="saleCustomer"></select>
      </div>
      <div class="form-group">
        <label>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„ÙØ¹Ù„ÙŠ (Ø¯.Ø¥)</label>
        <input type="number" id="salePrice" placeholder="0">
      </div>
      <div class="form-group">
        <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
        <select id="salePayment">
          <option>Ù†Ù‚Ø¯Ø§Ù‹</option>
          <option>ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ</option>
          <option>Ø´ÙŠÙƒ</option>
          <option>ØªÙ‚Ø³ÙŠØ·</option>
        </select>
      </div>
    </div>
    <div style="margin-top:20px;display:flex;gap:10px;justify-content:flex-start">
      <button class="btn btn-gold" onclick="addSale()">âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¨ÙŠØ¹</button>
      <button class="btn btn-outline" onclick="closeModal('addSale')">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<!-- Add Customer Modal -->

<div class="modal-overlay" id="modal-addCustomer">
  <div class="modal">
    <div class="modal-title">
      ğŸ‘¥ Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
      <button class="modal-close" onclick="closeModal('addCustomer')">âœ•</button>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
        <input type="text" id="custName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
      </div>
      <div class="form-group">
        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="tel" id="custPhone" placeholder="05X XXX XXXX">
      </div>
      <div class="form-group">
        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© / Ø¬ÙˆØ§Ø² Ø§Ù„Ø³ÙØ±</label>
        <input type="text" id="custID" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©">
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
        <input type="text" id="custAddress" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© - Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">
      </div>
    </div>
    <div style="margin-top:20px;display:flex;gap:10px;justify-content:flex-start">
      <button class="btn btn-gold" onclick="addCustomer()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„</button>
      <button class="btn btn-outline" onclick="closeModal('addCustomer')">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<!-- Add Employee Modal -->

<div class="modal-overlay" id="modal-addEmployee">
  <div class="modal">
    <div class="modal-title">
      ğŸ‘” Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯
      <button class="modal-close" onclick="closeModal('addEmployee')">âœ•</button>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
        <input type="text" id="empName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ù…Ù†ØµØ¨</label>
        <select id="empRole">
          <option>Ù…Ø¯ÙŠØ± Ù…Ø¨ÙŠØ¹Ø§Øª</option>
          <option>Ù…ÙˆØ¸Ù Ù…Ø¨ÙŠØ¹Ø§Øª</option>
          <option>Ù…Ø­Ø§Ø³Ø¨</option>
          <option>ÙÙ†ÙŠ ØµÙŠØ§Ù†Ø©</option>
          <option>Ø³ÙƒØ±ØªÙŠØ±</option>
          <option>Ø³Ø§Ø¦Ù‚</option>
        </select>
      </div>
      <div class="form-group">
        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="tel" id="empPhone" placeholder="05X XXX XXXX">
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ø¯.Ø¥)</label>
        <input type="number" id="empSalary" placeholder="0">
      </div>
      <div class="form-group">
        <label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© %</label>
        <input type="number" id="empCommission" placeholder="0" min="0" max="100">
      </div>
    </div>
    <div style="margin-top:20px;display:flex;gap:10px;justify-content:flex-start">
      <button class="btn btn-gold" onclick="addEmployee()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ¸Ù</button>
      <button class="btn btn-outline" onclick="closeModal('addEmployee')">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<!-- Add Expense Modal -->

<div class="modal-overlay" id="modal-addExpense">
  <div class="modal">
    <div class="modal-title">
      ğŸ§¾ Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ
      <button class="modal-close" onclick="closeModal('addExpense')">âœ•</button>
    </div>
    <div class="form-grid">
      <div class="form-group">
        <label>Ø§Ù„ÙˆØµÙ</label>
        <input type="text" id="expDesc" placeholder="ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ">
      </div>
      <div class="form-group">
        <label>Ø§Ù„ÙØ¦Ø©</label>
        <select id="expCategory">
          <option>Ø¥ÙŠØ¬Ø§Ø±</option>
          <option>ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙˆÙ…Ø§Ø¡</option>
          <option>ØµÙŠØ§Ù†Ø©</option>
          <option>ØªØ³ÙˆÙŠÙ‚ ÙˆØ¥Ø¹Ù„Ø§Ù†</option>
          <option>ØªØ£Ù…ÙŠÙ†</option>
          <option>ÙˆÙ‚ÙˆØ¯</option>
          <option>Ù…Ø´ØªØ±ÙŠØ§Øª</option>
          <option>Ø£Ø®Ø±Ù‰</option>
        </select>
      </div>
      <div class="form-group">
        <label>Ø§Ù„Ù…Ø¨Ù„Øº (Ø¯.Ø¥)</label>
        <input type="number" id="expAmount" placeholder="0">
      </div>
      <div class="form-group">
        <label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
        <input type="date" id="expDate">
      </div>
    </div>
    <div style="margin-top:20px;display:flex;gap:10px;justify-content:flex-start">
      <button class="btn btn-gold" onclick="addExpense()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…ØµØ±ÙˆÙ</button>
      <button class="btn btn-outline" onclick="closeModal('addExpense')">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  </div>
</div>

<script>
// ========== DATA STORE ==========
let data = {
  cars: [],
  sales: [],
  customers: [],
  employees: [],
  expenses: [],
  activities: []
};

// Load from localStorage
function loadData() {
  const saved = localStorage.getItem('maaMotorData');
  if (saved) data = JSON.parse(saved);
}
function saveData() {
  localStorage.setItem('maaMotorData', JSON.stringify(data));
}
loadData();

// ========== DATE/TIME ==========
function updateDateTime() {
  const now = new Date();
  const options = { weekday:'long', year:'numeric', month:'long', day:'numeric' };
  document.getElementById('currentDate').textContent = now.toLocaleDateString('ar-AE', options);
  document.getElementById('currentTime').textContent = now.toLocaleTimeString('ar-AE');
}
updateDateTime();
setInterval(updateDateTime, 1000);

// ========== NAVIGATION ==========
function showSection(name) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('sec-' + name).classList.add('active');
  event.target.classList.add('active');
  if (name === 'sales') populateSaleDropdowns();
  if (name === 'finance') updateFinance();
}

// ========== MODAL ==========
function openModal(name) {
  document.getElementById('modal-' + name).classList.add('show');
}
function closeModal(name) {
  document.getElementById('modal-' + name).classList.remove('show');
}

// ========== FORMAT ==========
function fmt(n) {
  return Number(n).toLocaleString('ar-AE');
}

// ========== CARS ==========
function addCar() {
  const car = {
    id: Date.now(),
    brand: document.getElementById('carBrand').value,
    model: document.getElementById('carModel').value,
    year: document.getElementById('carYear').value,
    color: document.getElementById('carColor').value,
    emirate: document.getElementById('carEmirate').value,
    plate: document.getElementById('carPlate').value,
    buyPrice: Number(document.getElementById('carBuyPrice').value),
    sellPrice: Number(document.getElementById('carSellPrice').value),
    notes: document.getElementById('carNotes').value,
    status: 'Ù…ØªÙˆÙØ±Ø©',
    date: new Date().toLocaleDateString('ar-AE')
  };
  if (!car.brand || !car.model) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø§Ø±ÙƒØ© ÙˆØ§Ù„Ù…ÙˆØ¯ÙŠÙ„');
  data.cars.push(car);
  data.activities.unshift({ text: `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${car.brand} ${car.model} ${car.year}`, date: new Date().toLocaleString('ar-AE'), type: 'car' });
  saveData();
  renderCars();
  updateStats();
  closeModal('addCar');
  // Reset form
  ['carBrand','carModel','carYear','carColor','carEmirate','carPlate','carBuyPrice','carSellPrice','carNotes'].forEach(id => document.getElementById(id).value = '');
}

function renderCars() {
  const tbody = document.getElementById('carsTable');
  const empty = document.getElementById('carsEmpty');
  if (data.cars.length === 0) { tbody.innerHTML = ''; empty.style.display = 'block'; return; }
  empty.style.display = 'none';
  tbody.innerHTML = data.cars.map((c, i) => `
    <tr>
      <td>${i + 1}</td>
      <td><strong>${c.brand}</strong></td>
      <td>${c.model}</td>
      <td>${c.year}</td>
      <td>${c.color}</td>
      <td><span class="plate">${c.emirate} ${c.plate}</span></td>
      <td>${fmt(c.buyPrice)} Ø¯.Ø¥</td>
      <td>${fmt(c.sellPrice)} Ø¯.Ø¥</td>
      <td><span class="badge ${c.status === 'Ù…ØªÙˆÙØ±Ø©' ? 'badge-green' : 'badge-red'}">${c.status}</span></td>
      <td>
        <div class="action-btns">
          <button class="btn btn-red btn-sm" onclick="deleteCar(${c.id})">Ø­Ø°Ù</button>
        </div>
      </td>
    </tr>
  `).join('');
}

function deleteCar(id) {
  if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø±Ø©ØŸ')) return;
  data.cars = data.cars.filter(c => c.id !== id);
  saveData(); renderCars(); updateStats();
}

function filterCars(q) {
  const rows = document.querySelectorAll('#carsTable tr');
  rows.forEach(row => {
    row.style.display = row.textContent.includes(q) ? '' : 'none';
  });
}

// ========== SALES ==========
function populateSaleDropdowns() {
  const carSelect = document.getElementById('saleCar');
  const custSelect = document.getElementById('saleCustomer');
  const available = data.cars.filter(c => c.status === 'Ù…ØªÙˆÙØ±Ø©');
  carSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙŠØ§Ø±Ø©</option>' + available.map(c => `<option value="${c.id}">${c.brand} ${c.model} ${c.year} - ${fmt(c.sellPrice)} Ø¯.Ø¥</option>`).join('');
  custSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø´ØªØ±ÙŠ</option>' + data.customers.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
}

function addSale() {
  const carId = Number(document.getElementById('saleCar').value);
  const custId = Number(document.getElementById('saleCustomer').value);
  const price = Number(document.getElementById('salePrice').value);
  const payment = document.getElementById('salePayment').value;
  if (!carId || !custId || !price) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
  const car = data.cars.find(c => c.id === carId);
  const cust = data.customers.find(c => c.id === custId);
  const sale = {
    id: Date.now(),
    carId, customerId: custId,
    carName: `${car.brand} ${car.model} ${car.year}`,
    customerName: cust.name,
    price, profit: price - car.buyPrice,
    payment,
    date: new Date().toLocaleDateString('ar-AE')
  };
  data.sales.push(sale);
  car.status = 'Ù…Ø¨Ø§Ø¹Ø©';
  data.activities.unshift({ text: `ØªÙ… Ø¨ÙŠØ¹ ${car.brand} ${car.model} Ù„Ù€ ${cust.name} Ø¨Ù…Ø¨Ù„Øº ${fmt(price)} Ø¯.Ø¥`, date: new Date().toLocaleString('ar-AE'), type: 'sale' });
  saveData(); renderSales(); renderCars(); updateStats();
  closeModal('addSale');
}

function renderSales() {
  const tbody = document.getElementById('salesTable');
  const empty = document.getElementById('salesEmpty');
  if (data.sales.length === 0) { tbody.innerHTML = ''; empty.style.display = 'block'; return; }
  empty.style.display = 'none';
  tbody.innerHTML = data.sales.map((s, i) => `
    <tr>
      <td>${i + 1}</td>
      <td><strong>${s.carName}</strong></td>
      <td>${s.customerName}</td>
      <td>${fmt(s.price)} Ø¯.Ø¥</td>
      <td><span class="badge ${s.profit >= 0 ? 'badge-green' : 'badge-red'}">${fmt(s.profit)} Ø¯.Ø¥</span></td>
      <td>${s.date}</td>
      <td><span class="badge badge-blue">${s.payment}</span></td>
    </tr>
  `).join('');
}

// ========== CUSTOMERS ==========
function addCustomer() {
  const cust = {
    id: Date.now(),
    name: document.getElementById('custName').value,
    phone: document.getElementById('custPhone').value,
    idNumber: document.getElementById('custID').value,
    address: document.getElementById('custAddress').value,
    date: new Date().toLocaleDateString('ar-AE')
  };
  if (!cust.name || !cust.phone) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù‡Ø§ØªÙ');
  data.customers.push(cust);
  data.activities.unshift({ text: `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ ${cust.name}`, date: new Date().toLocaleString('ar-AE'), type: 'customer' });
  saveData(); renderCustomers(); updateStats();
  closeModal('addCustomer');
  ['custName','custPhone','custID','custAddress'].forEach(id => document.getElementById(id).value = '');
}

function renderCustomers() {
  const tbody = document.getElementById('customersTable');
  const empty = document.getElementById('customersEmpty');
  if (data.customers.length === 0) { tbody.innerHTML = ''; empty.style.display = 'block'; return; }
  empty.style.display = 'none';
  tbody.innerHTML = data.customers.map((c, i) => `
    <tr>
      <td>${i + 1}</td>
      <td><strong>${c.name}</strong></td>
      <td>${c.phone}</td>
      <td>${c.idNumber}</td>
      <td>${c.address}</td>
      <td>${c.date}</td>
      <td><button class="btn btn-red btn-sm" onclick="deleteCustomer(${c.id})">Ø­Ø°Ù</button></td>
    </tr>
  `).join('');
}

function deleteCustomer(id) {
  if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ')) return;
  data.customers = data.customers.filter(c => c.id !== id);
  saveData(); renderCustomers(); updateStats();
}

function filterCustomers(q) {
  const rows = document.querySelectorAll('#customersTable tr');
  rows.forEach(row => {
    row.style.display = row.textContent.includes(q) ? '' : 'none';
  });
}

// ========== EMPLOYEES ==========
function addEmployee() {
  const emp = {
    id: Date.now(),
    name: document.getElementById('empName').value,
    role: document.getElementById('empRole').value,
    phone: document.getElementById('empPhone').value,
    salary: Number(document.getElementById('empSalary').value),
    commission: Number(document.getElementById('empCommission').value),
    status: 'Ù†Ø´Ø·'
  };
  if (!emp.name) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù');
  data.employees.push(emp);
  data.activities.unshift({ text: `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¸Ù ${emp.name}`, date: new Date().toLocaleString('ar-AE'), type: 'employee' });
  saveData(); renderEmployees(); updateStats();
  closeModal('addEmployee');
  ['empName','empPhone','empSalary','empCommission'].forEach(id => document.getElementById(id).value = '');
}

function renderEmployees() {
  const tbody = document.getElementById('employeesTable');
  const empty = document.getElementById('employeesEmpty');
  if (data.employees.length === 0) { tbody.innerHTML = ''; empty.style.display = 'block'; return; }
  empty.style.display = 'none';
  tbody.innerHTML = data.employees.map((e, i) => `
    <tr>
      <td>${i + 1}</td>
      <td><strong>${e.name}</strong></td>
      <td><span class="badge badge-gold">${e.role}</span></td>
      <td>${e.phone}</td>
      <td>${fmt(e.salary)} Ø¯.Ø¥</td>
      <td>${e.commission}%</td>
      <td><span class="badge badge-green">${e.status}</span></td>
      <td><button class="btn btn-red btn-sm" onclick="deleteEmployee(${e.id})">Ø­Ø°Ù</button></td>
    </tr>
  `).join('');
}

function deleteEmployee(id) {
  if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¸ÙØŸ')) return;
  data.employees = data.employees.filter(e => e.id !== id);
  saveData(); renderEmployees();
}

// ========== EXPENSES ==========
function addExpense() {
  const exp = {
    id: Date.now(),
    desc: document.getElementById('expDesc').value,
    category: document.getElementById('expCategory').value,
    amount: Number(document.getElementById('expAmount').value),
    date: document.getElementById('expDate').value || new Date().toLocaleDateString('ar-AE')
  };
  if (!exp.desc || !exp.amount) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙˆØµÙ ÙˆØ§Ù„Ù…Ø¨Ù„Øº');
  data.expenses.push(exp);
  data.activities.unshift({ text: `Ù…ØµØ±ÙˆÙ: ${exp.desc} - ${fmt(exp.amount)} Ø¯.Ø¥`, date: new Date().toLocaleString('ar-AE'), type: 'expense' });
  saveData(); renderExpenses(); updateStats();
  closeModal('addExpense');
  ['expDesc','expAmount','expDate'].forEach(id => document.getElementById(id).value = '');
}

function renderExpenses() {
  const tbody = document.getElementById('expensesTable');
  const empty = document.getElementById('expensesEmpty');
  if (data.expenses.length === 0) { tbody.innerHTML = ''; empty.style.display = 'block'; return; }
  empty.style.display = 'none';
  tbody.innerHTML = data.expenses.map((e, i) => `
    <tr>
      <td>${i + 1}</td>
      <td><strong>${e.desc}</strong></td>
      <td><span class="badge badge-orange">${e.category}</span></td>
      <td>${fmt(e.amount)} Ø¯.Ø¥</td>
      <td>${e.date}</td>
      <td><button class="btn btn-red btn-sm" onclick="deleteExpense(${e.id})">Ø­Ø°Ù</button></td>
    </tr>
  `).join('');
}

function deleteExpense(id) {
  if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØµØ±ÙˆÙØŸ')) return;
  data.expenses = data.expenses.filter(e => e.id !== id);
  saveData(); renderExpenses(); updateStats();
}

// ========== STATS ==========
function updateStats() {
  document.getElementById('totalCars').textContent = data.cars.filter(c => c.status === 'Ù…ØªÙˆÙØ±Ø©').length;
  document.getElementById('totalSales').textContent = data.sales.length;
  document.getElementById('totalCustomers').textContent = data.customers.length;
  const revenue = data.sales.reduce((sum, s) => sum + s.price, 0);
  document.getElementById('totalRevenue').textContent = fmt(revenue);
  renderActivities();
}

function renderActivities() {
  const el = document.getElementById('recentActivity');
  if (data.activities.length === 0) {
    el.innerHTML = '<div class="empty-state"><div class="icon">ğŸ“‹</div><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯</p></div>';
    return;
  }
  const icons = { car: 'ğŸš—', sale: 'ğŸ’°', customer: 'ğŸ‘¥', employee: 'ğŸ‘”', expense: 'ğŸ§¾' };
  el.innerHTML = data.activities.slice(0, 10).map(a => `
    <div style="padding:12px 0;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center">
      <div><span style="margin-left:8px">${icons[a.type] || 'ğŸ“‹'}</span>${a.text}</div>
      <div style="font-size:12px;color:var(--text3);white-space:nowrap">${a.date}</div>
    </div>
  `).join('');
}

// ========== FINANCE ==========
function updateFinance() {
  const totalSales = data.sales.reduce((s, v) => s + v.price, 0);
  const totalProfit = data.sales.reduce((s, v) => s + v.profit, 0);
  const totalExpenses = data.expenses.reduce((s, v) => s + v.amount, 0);
  const totalSalaries = data.employees.reduce((s, v) => s + v.salary, 0);
  const inventoryValue = data.cars.filter(c => c.status === 'Ù…ØªÙˆÙØ±Ø©').reduce((s, v) => s + v.buyPrice, 0);
  const netProfit = totalProfit - totalExpenses - totalSalaries;

  document.getElementById('finTotalSales').textContent = fmt(totalSales) + ' Ø¯.Ø¥';
  document.getElementById('finTotalProfit').textContent = fmt(totalProfit) + ' Ø¯.Ø¥';
  document.getElementById('finTotalExpenses').textContent = fmt(totalExpenses) + ' Ø¯.Ø¥';
  document.getElementById('finTotalSalaries').textContent = fmt(totalSalaries) + ' Ø¯.Ø¥';
  document.getElementById('finInventoryValue').textContent = fmt(inventoryValue) + ' Ø¯.Ø¥';
  document.getElementById('finNetProfit').textContent = fmt(netProfit) + ' Ø¯.Ø¥';
  document.getElementById('finNetProfit').className = 'amount ' + (netProfit >= 0 ? 'positive' : 'negative');
}

// ========== INIT ==========
renderCars();
renderSales();
renderCustomers();
renderEmployees();
renderExpenses();
updateStats();
</script>

</body>
</html>